!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("./foundation.core"),require("jquery"),require("./foundation.util.mediaQuery"),require("./foundation.util.motion")):"function"==typeof define&&define.amd?define(["./foundation.core","jquery","./foundation.util.mediaQuery","./foundation.util.motion"],t):"object"==typeof exports?exports.__FOUNDATION_EXTERNAL__=t(require("./foundation.core"),require("jquery"),require("./foundation.util.mediaQuery"),require("./foundation.util.motion")):(e.__FOUNDATION_EXTERNAL__=e.__FOUNDATION_EXTERNAL__||{},e.__FOUNDATION_EXTERNAL__["foundation.interchange"]=t(e.__FOUNDATION_EXTERNAL__["foundation.core"],e.jQuery,e.__FOUNDATION_EXTERNAL__["foundation.util.mediaQuery"],e.__FOUNDATION_EXTERNAL__["foundation.util.motion"]))}(self,function(a,s,u,l){return function(){"use strict";var n={"./js/foundation.interchange.js":function(e,t,n){n.r(t),n.d(t,{Interchange:function(){return i}});var t=n("jquery"),r=n.n(t),a=n("./foundation.util.mediaQuery"),s=n("./foundation.core"),u=n("./js/foundation.util.triggers.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=d(n),t=(e=i?(e=d(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);var n,i=f(o);function o(){var e=this,t=o;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"_setup",value:function(e,t){this.$element=e,this.options=r().extend({},o.defaults,this.$element.data(),t),this.rules=[],this.currentPath="",this.className="Interchange",u.Triggers.init(r()),this._init(),this._events()}},{key:"_init",value:function(){a.MediaQuery._init();var e=this.$element[0].id||(0,s.GetYoDigits)(6,"interchange");this.$element.attr({"data-resize":e,id:e}),this._parseOptions(),this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){var e=this;this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",function(){return e._reflow()})}},{key:"_reflow",value:function(){var e,t,n;for(t in this.rules)this.rules.hasOwnProperty(t)&&(n=this.rules[t],window.matchMedia(n.query).matches)&&(e=n);e&&this.replace(e.path)}},{key:"_parseOptions",value:function(){void 0===this.options.type?this.options.type="auto":-1===["auto","src","background","html"].indexOf(this.options.type)&&(console.warn('Warning: invalid value "'.concat(this.options.type,'" for Interchange option "type"')),this.options.type="auto")}},{key:"_addBreakpoints",value:function(){for(var e in a.MediaQuery.queries)a.MediaQuery.queries.hasOwnProperty(e)&&(e=a.MediaQuery.queries[e],o.SPECIAL_QUERIES[e.name]=e.value)}},{key:"_generateRules",value:function(){var e,t,n,i=[],r=this.options.rules||this.$element.data("interchange");for(e in r="string"==typeof r?r.match(/\[.*?, .*?\]/g):r)r.hasOwnProperty(e)&&(t=(n=r[e].slice(1,-1).split(", ")).slice(0,-1).join(""),n=n[n.length-1],o.SPECIAL_QUERIES[n]&&(n=o.SPECIAL_QUERIES[n]),i.push({path:t,query:n}));this.rules=i}},{key:"replace",value:function(t){var n,e,i=this;this.currentPath!==t&&(n="replaced.zf.interchange","src"===(e="auto"===(e=this.options.type)?"IMG"===this.$element[0].nodeName?"src":t.match(/\.(gif|jpe?g|png|svg|tiff)([?#].*)?/i)?"background":"html":e)?this.$element.attr("src",t).on("load",function(){i.currentPath=t}).trigger(n):"background"===e?(t=t.replace(/\(/g,"%28").replace(/\)/g,"%29"),this.$element.css({"background-image":"url("+t+")"}).trigger(n)):"html"===e&&r().get(t,function(e){i.$element.html(e).trigger(n),r()(e).foundation(),i.currentPath=t}))}},{key:"_destroy",value:function(){this.$element.off("resizeme.zf.trigger")}}])&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(s.Plugin);i.defaults={rules:null,type:"auto"},i.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"}},"./js/foundation.util.triggers.js":function(e,t,n){n.r(t),n.d(t,{Triggers:function(){return l}});var t=n("jquery"),o=n.n(t),i=n("./foundation.core"),r=n("./foundation.util.motion");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t,n){t.data(n).split(" ").forEach(function(e){o()("#".concat(e))["close"===n?"trigger":"triggerHandler"]("".concat(n,".zf.trigger"),[t])})}var u=function(){for(var e=["WebKit","Moz","O","Ms",""],t=0;t<e.length;t++)if("".concat(e[t],"MutationObserver")in window)return window["".concat(e[t],"MutationObserver")];return!1}(),l={Listeners:{Basic:{},Global:{}},Initializers:{}};function c(e,t,n){var i,r=Array.prototype.slice.call(arguments,3);o()(window).on(t,function(){i&&clearTimeout(i),i=setTimeout(function(){n.apply(null,r)},e||10)})}l.Listeners.Basic={openListener:function(){s(o()(this),"open")},closeListener:function(){o()(this).data("close")?s(o()(this),"close"):o()(this).trigger("close.zf.trigger")},toggleListener:function(){o()(this).data("toggle")?s(o()(this),"toggle"):o()(this).trigger("toggle.zf.trigger")},closeableListener:function(e){var t=o()(this).data("closable");e.stopPropagation(),""!==t?r.Motion.animateOut(o()(this),t,function(){o()(this).trigger("closed.zf")}):o()(this).fadeOut().trigger("closed.zf")},toggleFocusListener:function(){var e=o()(this).data("toggle-focus");o()("#".concat(e)).triggerHandler("toggle.zf.trigger",[o()(this)])}},l.Initializers.addOpenListener=function(e){e.off("click.zf.trigger",l.Listeners.Basic.openListener),e.on("click.zf.trigger","[data-open]",l.Listeners.Basic.openListener)},l.Initializers.addCloseListener=function(e){e.off("click.zf.trigger",l.Listeners.Basic.closeListener),e.on("click.zf.trigger","[data-close]",l.Listeners.Basic.closeListener)},l.Initializers.addToggleListener=function(e){e.off("click.zf.trigger",l.Listeners.Basic.toggleListener),e.on("click.zf.trigger","[data-toggle]",l.Listeners.Basic.toggleListener)},l.Initializers.addCloseableListener=function(e){e.off("close.zf.trigger",l.Listeners.Basic.closeableListener),e.on("close.zf.trigger","[data-closeable], [data-closable]",l.Listeners.Basic.closeableListener)},l.Initializers.addToggleFocusListener=function(e){e.off("focus.zf.trigger blur.zf.trigger",l.Listeners.Basic.toggleFocusListener),e.on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",l.Listeners.Basic.toggleFocusListener)},l.Listeners.Global={resizeListener:function(e){u||e.each(function(){o()(this).triggerHandler("resizeme.zf.trigger")}),e.attr("data-events","resize")},scrollListener:function(e){u||e.each(function(){o()(this).triggerHandler("scrollme.zf.trigger")}),e.attr("data-events","scroll")},closeMeListener:function(e,t){e=e.namespace.split(".")[0];o()("[data-".concat(e,"]")).not('[data-yeti-box="'.concat(t,'"]')).each(function(){var e=o()(this);e.triggerHandler("close.zf.trigger",[e])})}},l.Initializers.addClosemeListener=function(e){var t=o()("[data-yeti-box]"),n=["dropdown","tooltip","reveal"];e&&("string"==typeof e?n.push(e):"object"===a(e)&&"string"==typeof e[0]?n=n.concat(e):console.error("Plugin names must be strings")),t.length&&(e=n.map(function(e){return"closeme.zf.".concat(e)}).join(" "),o()(window).off(e).on(e,l.Listeners.Global.closeMeListener))},l.Initializers.addResizeListener=function(e){var t=o()("[data-resize]");t.length&&c(e,"resize.zf.trigger",l.Listeners.Global.resizeListener,t)},l.Initializers.addScrollListener=function(e){var t=o()("[data-scroll]");t.length&&c(e,"scroll.zf.trigger",l.Listeners.Global.scrollListener,t)},l.Initializers.addMutationEventsListener=function(e){if(!u)return!1;function t(e){var t=o()(e[0].target);switch(e[0].type){case"attributes":"scroll"===t.attr("data-events")&&"data-events"===e[0].attributeName&&t.triggerHandler("scrollme.zf.trigger",[t,window.pageYOffset]),"resize"===t.attr("data-events")&&"data-events"===e[0].attributeName&&t.triggerHandler("resizeme.zf.trigger",[t]),"style"===e[0].attributeName&&(t.closest("[data-mutate]").attr("data-events","mutate"),t.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[t.closest("[data-mutate]")]));break;case"childList":t.closest("[data-mutate]").attr("data-events","mutate"),t.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[t.closest("[data-mutate]")]);break;default:return!1}}var n=e.find("[data-resize], [data-scroll], [data-mutate]");if(n.length)for(var i=0;i<=n.length-1;i++)new u(t).observe(n[i],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})},l.Initializers.addSimpleListeners=function(){var e=o()(document);l.Initializers.addOpenListener(e),l.Initializers.addCloseListener(e),l.Initializers.addToggleListener(e),l.Initializers.addCloseableListener(e),l.Initializers.addToggleFocusListener(e)},l.Initializers.addGlobalListeners=function(){var e=o()(document);l.Initializers.addMutationEventsListener(e),l.Initializers.addResizeListener(250),l.Initializers.addScrollListener(),l.Initializers.addClosemeListener()},l.init=function(e,t){(0,i.onLoad)(o()(window),function(){!0!==o().triggersInitialized&&(l.Initializers.addSimpleListeners(),l.Initializers.addGlobalListeners(),o().triggersInitialized=!0)}),t&&(t.Triggers=l,t.IHearYou=l.Initializers.addGlobalListeners)}},"./foundation.core":function(e){e.exports=a},"./foundation.util.mediaQuery":function(e){e.exports=u},"./foundation.util.motion":function(e){e.exports=l},jquery:function(e){e.exports=s}},i={};function r(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e](t,t.exports,r)),t.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var e,t,o={};return(r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(o),r.d(o,{Foundation:function(){return e.Foundation},Interchange:function(){return t.Interchange}}),e=r("./foundation.core"),t=r("./js/foundation.interchange.js"),e.Foundation.plugin(t.Interchange,"Interchange"),o}()});
//# sourceMappingURL=foundation.interchange.min.js.map
